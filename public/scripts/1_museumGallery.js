import*as THREE from"three";import{PointerLockControls}from"three/examples/jsm/controls/PointerLockControls.js";console.log("THREE object is loaded ðŸ˜„, here is the THREE object: ",THREE);const scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);const imgUrl1="Images/assets/artGallery1Index/low-angle-shot-mesmerizing-starry-sky.jpg",imgUrl2="Images/assets/fantasy_9.webp",imgUrl3="Images/assets/artGallery1Index/ultra-detailed-nebula-abstract-wallpaper-4.jpg",imgUrl4="../Images/assets/fantasy_10.webp",imgUrl5="/Images/assets/artGallery1Index/ultra-detailed-nebula-abstract-wallpaper-4.jpg",loader=new THREE.TextureLoader,texture=loader.load(imgUrl2,(()=>{const e=new THREE.WebGLCubeRenderTarget(texture.image.height);e.fromEquirectangularTexture(renderer,texture),texture.generateMipmaps=!0,texture.magFilter=THREE.LinearFilter,texture.colorSpace=THREE.SRGBColorSpace,texture.minFilter=THREE.LinearMipMapLinearFilter,scene.background=e.texture}));function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}scene.add(camera),camera.position.z=5,camera.position.y=3,window.addEventListener("resize",onWindowResize,!1);let ambientLight=new THREE.AmbientLight(16777215,.5);scene.add(ambientLight);let directionalLight=new THREE.DirectionalLight(16777215,.8);directionalLight.position.set(20,100,10),directionalLight.target.position.set(0,0,0),directionalLight.castShadow=!0,directionalLight.shadow.bias=-1e-4,directionalLight.shadow.mapSize.width=2048,directionalLight.shadow.mapSize.height=2048,directionalLight.shadow.camera.near=.5,directionalLight.shadow.camera.far=500,directionalLight.shadow.camera.left=100,directionalLight.shadow.camera.right=-100,directionalLight.shadow.camera.top=100,directionalLight.shadow.camera.bottom=-100,scene.add(directionalLight),directionalLight.position.y=50;let hemisphereLight=new THREE.HemisphereLight(16777215,.8,100);hemisphereLight.position.set(0,24,0),scene.add(hemisphereLight),hemisphereLight.visible=!0;let pointLight=new THREE.PointLight(16777215,.5,100);pointLight.position.set(0,24,0),scene.add(pointLight),pointLight.visible=!0;let spotLight=new THREE.SpotLight(16777215,.5,100);function showMenu(){document.getElementById("menu").style.display="block"}function hideMenu(){document.getElementById("menu").style.display="none"}spotLight.position.set(0,24,0),scene.add(spotLight),spotLight.visible=!0,renderer.colorSpace=THREE.SRGBColorSpace;const cursorControls=new PointerLockControls(camera,renderer.domElement);function onKeyDown(e){let t=e.which;39!==t&&68!==t||camera.translateX(.15),37!==t&&65!==t||camera.translateX(-.15),38!==t&&87!==t||(e.preventDefault(),camera.translateZ(-.15)),81===t&&camera.rotateY(.15),69===t&&camera.rotateY(-.15),40!==t&&83!==t||camera.translateZ(.15),27===t&&showMenu()}renderer.domElement.addEventListener("click",(()=>{!0===cursorControls.isLocked?(cursorControls.unlock(),showMenu()):(cursorControls.lock(),hideMenu())})),cursorControls.addEventListener("lock",(()=>console.log("Pointer Locked."))),cursorControls.addEventListener("unlock",(()=>console.log("Pointer Unlocked."))),document.addEventListener("keydown",onKeyDown,!0);const verticesOfCube=[-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1],indicesOfFaces=[2,1,0,0,3,2,0,4,7,7,3,0,0,1,5,5,4,0,1,2,6,6,5,1,2,3,7,7,6,2,4,5,6,6,7,4],geometryWorld=new THREE.PolyhedronGeometry(verticesOfCube,indicesOfFaces,10,20),materialWorld=new THREE.MeshStandardMaterial({color:6226159,wireframe:!0,wireframeLinewidth:10}),polyhedron=new THREE.Mesh(geometryWorld,materialWorld);scene.add(polyhedron),polyhedron.position.set(0,20,0),polyhedron.BBox=new THREE.Box3,polyhedron.BBox.setFromObject(polyhedron);const cubeSpotlight=new THREE.SpotLight(16777215,1,100);function objectTexture(e){const t=(new THREE.TextureLoader).load(e);return t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,t.colorSpace=THREE.SRGBColorSpace,t}cubeSpotlight.position.set(30,30,30),cubeSpotlight.target=polyhedron,scene.add(cubeSpotlight);const floorTexture=(new THREE.TextureLoader).load("../Images/assets/artGallery1Index/astronomy.png");floorTexture.wrapS=THREE.RepeatWrapping,floorTexture.wrapT=THREE.RepeatWrapping,floorTexture.repeat.set(20,20),floorTexture.colorSpace=THREE.SRGBColorSpace;const planeGeometry=new THREE.PlaneGeometry(55,55);let planeMaterial=new THREE.MeshBasicMaterial({map:floorTexture,side:THREE.DoubleSide,roughness:.5});const floorPlane=new THREE.Mesh(planeGeometry,planeMaterial);floorPlane.rotation.x=Math.PI/2,floorPlane.position.y=-Math.PI/2,floorPlane.BBox=new THREE.Box3,floorPlane.BBox.setFromObject(floorPlane),scene.add(floorPlane);const wallGroup=new THREE.Group;scene.add(wallGroup);const frontWall=new THREE.Mesh(new THREE.BoxGeometry(50,13,.005),new THREE.MeshBasicMaterial({color:11468975}));frontWall.position.z=-25;const backWall=new THREE.Mesh(new THREE.BoxGeometry(50,13,.05),new THREE.MeshBasicMaterial({color:44975}));backWall.position.z=25;const leftWall=new THREE.Mesh(new THREE.BoxGeometry(.001,13,50),new THREE.MeshBasicMaterial({color:44802}));leftWall.position.x=25;const rightWall=new THREE.Mesh(new THREE.BoxGeometry(.001,13,50),new THREE.MeshBasicMaterial({color:16755202}));rightWall.position.x=-25,wallGroup.add(frontWall,leftWall,rightWall,backWall),wallGroup.position.y=5,frontWall.material.map=objectTexture("../Images/assets/artGallery1Index/castle.jpg"),backWall.material.map=objectTexture("../Images/assets/artGallery1Index/museum.jpg"),leftWall.material.map=objectTexture("../Images/assets/artGallery1Index/castle.jpg"),rightWall.material.map=objectTexture("../Images/assets/artGallery1Index/castle.jpg");const radius=40,sphereGeometry=new THREE.SphereGeometry(40,32,32,0,2*Math.PI,0,Math.PI/2),ceilingTexture=(new THREE.TextureLoader).load("../Images/assets/artGallery1Index/astronomy.png");ceilingTexture.mapping=THREE.EquirectangularReflectionMapping;const ceilingMaterial=new THREE.MeshBasicMaterial({map:ceilingTexture,side:THREE.BackSide,emissive:16777215,emissiveMap:ceilingTexture}),heightOfWalls=10,dome=new THREE.Mesh(sphereGeometry,ceilingMaterial);dome.position.y=10,scene.add(dome);export function createPainting(e){const{width:t=1,height:n=1,color:o=16777215,textureUrl:a=null,position:i={x:0,y:0,z:0},rotation:r={x:0,y:0,z:0},bBox:s=!1}=e,l=new THREE.PlaneGeometry(t,n);let d={color:o,side:THREE.DoubleSide};if(a){const e=objectTexture(a);d.map=e}const c=new THREE.MeshBasicMaterial(d),p=new THREE.Mesh(l,c);return p.position.set(i.x,i.y,i.z),p.rotation.set(r.x,r.y,r.z),p}const painting1=createPainting({width:8,height:5,textureUrl:"../Images/Museumopen.png",position:{x:-24.99,y:3,z:20},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting1);const painting2=createPainting({width:8,height:5,textureUrl:"../Images/cyberpunk.jpg",position:{x:-24.99,y:3,z:10},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting2);const painting3=createPainting({width:8,height:5,textureUrl:"../Images/assets/artGallery1Index/aigen-awe.png",position:{x:-24.99,y:3,z:0},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting3);const painting4=createPainting({width:8,height:5,textureUrl:"../Images/10d625ce-efe9-472e-95f8-63427368a9d9.jpg",position:{x:-24.99,y:3,z:-10},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting4);const painting5=createPainting({width:8,height:5,textureUrl:"../Images/17d20236-9fe2-475b-b86f-5fd290b06068.jpg",position:{x:-24.99,y:3,z:-20},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting5);const painting6=createPainting({width:8,height:5,textureUrl:"../Images/80d4ece7-090e-45d0-b930-4b19c6b0601b.jpg",position:{x:20,y:3,z:-24.99},rotation:{x:0,y:0,z:0},bBox:!0});scene.add(painting6);const painting7=createPainting({width:8,height:5,textureUrl:"../Images/319046ed-cf78-4216-b961-a51ad48faed9.jpg",position:{x:10,y:3,z:-24.99},rotation:{x:0,y:0,z:0},bBox:!0});scene.add(painting7);const painting8=createPainting({width:8,height:5,textureUrl:"Images/clockthing.jpg",position:{x:0,y:3,z:-24.99},rotation:{x:0,y:0,z:0},bBox:!0});scene.add(painting8);const painting9=createPainting({width:8,height:5,textureUrl:"../Images/buildingicons/weirdbuild.png",position:{x:-10,y:3,z:-24.99},rotation:{x:0,y:0,z:0},bBox:!0});scene.add(painting9);const painting10=createPainting({width:8,height:5,textureUrl:"../Images/d7d83c67-71a2-4ac9-8384-8d8907013c57.jpg",position:{x:-20,y:3,z:-24.99},rotation:{x:0,y:0,z:0},bBox:!0});scene.add(painting10);const painting11=createPainting({width:8,height:5,textureUrl:"../Images/e96f2fd6-7499-4352-8dd0-1fa3231f4e3b.jpg",position:{x:24.99,y:3,z:20},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting11);const painting12=createPainting({width:8,height:5,textureUrl:"../Images/forest1.jpg",position:{x:24.99,y:3,z:10},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting12);const painting13=createPainting({width:8,height:5,textureUrl:"../Images/image0_0.jpg",position:{x:24.99,y:3,z:0},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting13);const painting14=createPainting({width:8,height:5,textureUrl:"/Images/image1_0.jpg",position:{x:24.99,y:3,z:-10},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting14);const painting15=createPainting({width:8,height:5,textureUrl:"Images/livingforest.jpg",position:{x:24.99,y:3,z:-20},rotation:{x:0,y:Math.PI/2,z:0},bBox:!0});scene.add(painting15);let sound=0,bufferLoaded=!1;export const audioSetup=e=>{document.getElementById("start_audio").addEventListener("click",audioStart),document.getElementById("pause_audio").addEventListener("click",audioPause),document.getElementById("stop_audio").addEventListener("click",audioStop);const t=new THREE.AudioListener;e.add(t),sound=new THREE.Audio(t),(new THREE.AudioLoader).load("../audio/ethereal-voyage-161507.mp3",(function(e){sound.setBuffer(e),sound.setLoop(!0),sound.setVolume(.1),bufferLoaded=!0}))};export const audioStart=()=>{sound&&bufferLoaded&&sound.play()};export const audioPause=()=>{sound&&sound.pause()};export const audioStop=()=>{sound&&sound.stop()};function animate(){requestAnimationFrame(animate),pointLight.position.copy(camera.position),renderer.shadowMap.enabled=!0,renderer.colorSpace=THREE.SRGBColorSpace,dome.rotation.y+=3e-4,polyhedron.rotation.x+=-.001,polyhedron.rotation.y+=-.001,renderer.render(scene,camera)}audioSetup(camera),animate();